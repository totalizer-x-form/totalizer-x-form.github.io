"use strict";(self.webpackChunk_totalizer_xform=self.webpackChunk_totalizer_xform||[]).push([[202],{80202:function(hr,Se,l){l.r(Se),l.d(Se,{$$get:function(){return ur},$$merge:function(){return cr},$$repair:function(){return vr},$$set:function(){return dr},XBaseForm:function(){return rr},XDrawerForm:function(){return lr}});var ie=function(a,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};try{for(var o=n.replace(/\[(\d+)\]/g,".[$1]").split("."),r=0;r<o.length-1;r+=1){var t=o[r];if(Array.isArray(a)&&/^\[(\d+)\]$/.test(t)){var i=parseInt(t.match(/^\[(\d+)\]$/)[1],10);a=a[i]}else a=a[t]}var u=o[o.length-1];if(Array.isArray(a)&&/^\[(\d+)\]$/.test(u)){var c=parseInt(u.match(/^\[(\d+)\]$/)[1],10);return a[c]}return a[u]}catch(v){e(v);return}},Ae=l(5574),Q=l.n(Ae),Ie=l(64599),Le=l.n(Ie),ze=l(52677),K=l.n(ze),O=l(53640),I=l(40476),Ze=l(68061),ee=l(20847),le=l(58128),ue=l(59334),L=l(74509),T=l(84851),C=l(67294),s=l(85893),Re=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.label,u=t.disabled,c=t.required,v=t.helperText,d=t.options,g=d===void 0?[]:d,m=t.errorMsg,x=t.row,p=x===void 0?!1:x;console.log("~~~ Checkbox",e,m);var j=r.getValue(e);(0,C.useEffect)(function(){r.linkage(e)},[j]);var S=g.map(function(h){return K()(h)==="object"?h:{label:h,value:h}}),y=new Map;S.forEach(function(h){y.set(h.value,j.includes(h.value))});var f={};return(0,s.jsxs)(O.Z,{error:!!m,children:[(0,s.jsx)(I.Z,{disabled:u,required:c,children:i}),(0,s.jsx)(Ze.Z,{row:p,children:S.map(function(h,$){return(0,s.jsx)(ee.Z,{value:$,control:(0,s.jsx)(le.Z,{checked:y.get(h.value),onChange:function(b,M){y.set(h.value,M);var E=[],A=y.entries(),k=Le()(A),q;try{for(k.s();!(q=k.n()).done;){var N=Q()(q.value,2),oe=N[0],je=N[1];je&&E.push(oe)}}catch(ae){k.e(ae)}finally{k.f()}r.setValue(e,E),r.validate(e)}}),label:(0,s.jsx)(ue.Z,{primary:h.label,secondary:h.secondary}),disabled:u||!!h.disabled},h.value)})}),(0,s.jsx)(L.Z,{children:m||v})]})}),z=l(23972),de=l(37786),Be=function(n){for(var e=/(\[([^\]]+)\]\(([^)]+)\))/g,o=[],r=0,t;(t=e.exec(n))!==null;)r<t.index&&o.push(n.slice(r,t.index)),o.push([t[2],t[3]]),r=e.lastIndex;return r<n.length&&o.push(n.slice(r)),o},We=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.label,u=i===void 0?"":i,c=t.title,v=c===void 0?"":c,d=t.disabled,g=t.required,m=t.helperText,x=t.errorMsg;console.log("~~~ Checked",e,x);var p=r.getValue(e),j=(0,C.useMemo)(function(){if(typeof v=="string"){var y=Be(v);return(0,s.jsx)(z.Z,{color:d?"textDisabled":"textPrimary",children:y.map(function(f,h){return Array.isArray(f)?(0,s.jsx)(de.Z,{href:f[1],children:f[0]},h):f})})}return v},[v]);(0,C.useEffect)(function(){r.linkage(e)},[p]);var S={};return(0,s.jsxs)(O.Z,{error:!!x,children:[(0,s.jsx)(I.Z,{disabled:d,required:g,children:u}),(0,s.jsx)(ee.Z,{control:(0,s.jsx)(le.Z,{checked:p,onChange:function(f,h){r.setValue(e,h),r.validate(e)}}),label:j,disabled:d}),(0,s.jsx)(L.Z,{children:x||m})]})}),He=l(97857),D=l.n(He),Ne=l(13769),te=l.n(Ne),ce=l(50720),Ye=l(17389),ve=l(10586),Ge=l(27484),V=l.n(Ge),Ue=["label","disabled","required","helperText","errorMsg","dataFormat"],Xe=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.label,u=t.disabled,c=t.required,v=t.helperText,d=t.errorMsg,g=t.dataFormat,m=g===void 0?"YYYY-MM-DD":g,x=te()(t,Ue);console.log("~~~ DatePicker",e);var p=(0,C.useState)(!1),j=Q()(p,2),S=j[0],y=j[1],f=r.getValue(e);(0,C.useEffect)(function(){r.linkage(e)},[f]);var h=function(){r.validate(e)};return(0,s.jsx)(ce._,{dateAdapter:ve.y,children:(0,s.jsx)(Ye.M,D()({open:S,label:i,value:f?V()(f,m):null,onChange:function(Z){r.setValue(e,V()(Z).format(m))},onClose:function(){h(),y(!1)},onOpen:function(){y(!0)},disabled:u,slotProps:{textField:{required:c,size:"medium",error:!!d,helperText:d||v,fullWidth:!0,onBlur:function(){h()},readOnly:!0,inputProps:{onClick:function(){u||y(!0)},style:{cursor:"pointer"}}}}},x))})}),Je=l(54764),Qe=["label","disabled","required","helperText","errorMsg","dataFormat","ampm"],Ke=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.label,u=t.disabled,c=t.required,v=t.helperText,d=t.errorMsg,g=t.dataFormat,m=g===void 0?"YYYY-MM-DD HH:mm:ss":g,x=t.ampm,p=x===void 0?!1:x,j=te()(t,Qe);console.log("~~~ DateTimePicker",e);var S=(0,C.useState)(!1),y=Q()(S,2),f=y[0],h=y[1],$=r.getValue(e);(0,C.useEffect)(function(){r.linkage(e)},[$]);var Z=function(){r.validate(e)};return(0,s.jsx)(ce._,{dateAdapter:ve.y,children:(0,s.jsx)(Je.x,D()({open:f,label:i,value:$?V()($,m):null,onChange:function(M){r.setValue(e,V()(M).format(m))},onClose:function(){h(!1),Z()},onOpen:function(){h(!0)},disabled:u,slotProps:{textField:{required:c,size:"medium",error:!!d,helperText:d||v,fullWidth:!0,onBlur:function(){Z()},readOnly:!0,inputProps:{onClick:function(){u||h(!0)},style:{cursor:"pointer"}}}},ampm:p},j))})}),Ce=l(60076),Te=l(69587),we=l(57709),R=l(91886),qe=l(16003),De=l(63931),_e=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.label,u=t.disabled,c=t.required,v=t.helperText,d=t.options,g=d===void 0?[]:d,m=t.errorMsg,x=t.checkbox,p=x===void 0?!1:x,j=t.chip,S=j===void 0?!1:j;console.log("~~~ Select",e);var y=r.getValue(e);(0,C.useEffect)(function(){r.linkage(e)},[y]);var f=g.map(function($){return K()($)==="object"?$:{label:$,value:$}}),h={};return(0,s.jsxs)(O.Z,{fullWidth:!0,error:!!m,children:[(0,s.jsx)(Ce.Z,{disabled:u,required:c,children:i}),(0,s.jsx)(Te.Z,D()(D()({value:y,multiple:!0,disabled:u,input:(0,s.jsx)(we.Z,{label:i}),renderValue:function(Z){var b=f.filter(function(M){return Z.includes(M.value)}).map(function(M){return M.label});return S?(0,s.jsx)(R.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:b.map(function(M,E){return(0,s.jsx)(qe.Z,{label:M},E)})}):b.join(", ")},onChange:function(Z){r.setValue(e,Z.target.value),r.validate(e)}},h),{},{children:f.map(function($){return(0,s.jsxs)(De.Z,{value:$.value,disabled:$.disabled,children:[p&&(0,s.jsx)(le.Z,{checked:!!y.includes($.value)}),(0,s.jsx)(ue.Z,{primary:$.label})]},$.value)})})),(0,s.jsx)(L.Z,{children:m||v})]})}),et=l(45993),tt=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.label,u=t.disabled,c=t.required,v=t.helperText,d=t.options,g=d===void 0?[]:d,m=t.errorMsg,x=t.row,p=x===void 0?!1:x;console.log("~~~ Raido",e,m);var j=r.getValue(e);(0,C.useEffect)(function(){r.linkage(e)},[j]);var S=g.map(function(f){return K()(f)==="object"?f:{label:f,value:f}}),y={};return(0,s.jsxs)(O.Z,{error:!!m,children:[(0,s.jsx)(I.Z,{disabled:u,required:c,children:i}),(0,s.jsx)(Ze.Z,{row:p,value:S.findIndex(function(f){return f.value===j}),onChange:function(h,$){r.setValue(e,S[parseInt($,10)].value),r.validate(e)},children:S.map(function(f,h){return(0,s.jsx)(ee.Z,{value:h,control:(0,s.jsx)(et.Z,{}),label:(0,s.jsx)(ue.Z,{primary:f.label,secondary:f.secondary}),disabled:u||!!f.disabled},f.value)})}),(0,s.jsx)(L.Z,{children:m||v})]})}),rt=l(60437),nt=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.label,u=t.disabled,c=t.required,v=t.helperText,d=t.errorMsg,g=t.color,m=t.marks,x=t.max,p=t.min,j=t.name,S=t.orientation,y=t.scale,f=t.shiftStep,h=t.step,$=t.tabIndex,Z=t.track,b=t.valueLabelDisplay,M=t.valueLabelFormate,E={color:g,marks:m,max:x,min:p,name:j,orientation:S,scale:y,shiftStep:f,step:h,tabIndex:$,track:Z,valueLabelDisplay:b,valueLabelFormate:M};Object.keys(E).forEach(function(k){E[k]===void 0&&delete E[k]}),console.log("~~~ Slider",e);var A=r.getValue(e);return(0,C.useEffect)(function(){r.linkage(e)},[A]),(0,s.jsxs)(O.Z,{fullWidth:!0,error:!!d,children:[(0,s.jsx)(I.Z,{disabled:u,required:c,children:i}),(0,s.jsx)(rt.Z,D()({value:A,disabled:u,onChange:function(q,N){r.setValue(e,N||0),r.validate(e)}},E)),(0,s.jsx)(L.Z,{children:d||v})]})}),ot=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.label,u=t.disabled,c=t.required,v=t.helperText,d=t.options,g=d===void 0?[]:d,m=t.errorMsg,x=t.variant,p=x===void 0?"outlined":x;console.log("~~~ Select",e);var j=r.getValue(e);(0,C.useEffect)(function(){r.linkage(e)},[j]);var S=g.map(function(f){return K()(f)==="object"?f:{label:f,value:f}}),y={};return(0,s.jsxs)(O.Z,{fullWidth:!0,error:!!m,variant:p,children:[(0,s.jsx)(Ce.Z,{disabled:u,required:c,children:i}),(0,s.jsx)(Te.Z,D()(D()({label:i,value:j,disabled:u,variant:p},y),{},{children:S.map(function(f){return(0,s.jsx)(De.Z,{value:f.value,onClick:function(){r.setValue(e,f.value),r.validate(e)},disabled:f.disabled,children:f.label},f.value)})})),(0,s.jsx)(L.Z,{children:m||v})]})}),at=l(51072),st=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.label,u=t.disabled,c=t.required,v=t.helperText,d=t.errorMsg,g=t.emptyIcon,m=t.emptyLabelText,x=t.highlightSelectedOnly,p=t.icon,j=t.max,S=t.name,y=t.precision,f={emptyIcon:g,emptyLabelText:m,highlightSelectedOnly:x,icon:p,max:j,name:S,precision:y};Object.keys(f).forEach(function($){f[$]===void 0&&delete f[$]}),console.log("~~~ Slider",e);var h=r.getValue(e);return(0,C.useEffect)(function(){r.linkage(e)},[h]),(0,s.jsxs)(O.Z,{fullWidth:!0,error:!!d,children:[(0,s.jsx)(I.Z,{disabled:u,required:c,children:i}),(0,s.jsx)(at.ZP,D()({value:h,disabled:u,onChange:function(Z,b){r.setValue(e,b),r.validate(e)}},f)),(0,s.jsx)(L.Z,{children:d||v})]})}),it=l(72852),lt=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.label,u=t.onTitle,c=u===void 0?"":u,v=t.offTitle,d=v===void 0?"":v,g=t.disabled,m=t.required,x=t.helperText,p=t.errorMsg,j=t.labelPlacement,S=j===void 0?"end":j;console.log("~~~ Select",e);var y=r.getValue(e);return(0,C.useEffect)(function(){r.linkage(e)},[y]),(0,s.jsxs)(O.Z,{error:!!p,children:[(0,s.jsx)(I.Z,{disabled:g,required:m,children:i}),(0,s.jsx)(ee.Z,{sx:{justifyContent:"start","& .MuiFormControlLabel-labelPlacementStart":{ml:0}},control:(0,s.jsx)(it.Z,{checked:y,disabled:g,onChange:function(h){r.setValue(e,h.target.checked),r.validate(e)}}),label:y?c:d,labelPlacement:S}),(0,s.jsx)(L.Z,{children:p||x})]})}),he=l(91057),G=l(54799),ut=l(22715),dt=l(71808),ct=l(72450),vt=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o;console.log("~~~ TextField",e);var t=r.context(e),i=t.label,u=t.disabled,c=t.readOnly,v=t.helperText,d=t.errorMsg,g=t.required,m=g===void 0?!1:g,x=t.placeholder,p=x===void 0?"":x,j=t.variant,S=j===void 0?"outlined":j,y=t.type,f=y===void 0?"text":y,h=t.multiline,$=t.rows,Z=t.minRows,b=t.maxRows,M=t.endAdornment,E=M===void 0?"":M,A=t.startAdornment,k=A===void 0?"":A,q=(0,C.useState)(f==="password"),N=Q()(q,2),oe=N[0],je=N[1],ae=r.getValue(e);(0,C.useEffect)(function(){r.linkage(e)},[ae]);var J={variant:S,placeholder:p};h===!0&&(J.multiline=h,$?J.rows=$:(Z&&(J.minRows=Z),b&&(J.maxRows=b)));var se={};return E&&(se.endAdornment=(0,s.jsx)(he.Z,{position:"end",children:E})),k&&(se.startAdornment=(0,s.jsx)(he.Z,{position:"start",children:k})),f==="password"&&(se.endAdornment=(0,s.jsx)(he.Z,{position:"end",children:(0,s.jsx)(G.Z,{onClick:function(){je(function(Y){return!Y})},onMouseDown:function(Y){return Y.preventDefault()},onMouseUp:function(Y){return Y.preventDefault()},edge:"end",children:oe?(0,s.jsx)(ct.Z,{}):(0,s.jsx)(dt.Z,{})})})),J.InputProps=se,(0,s.jsx)(ut.Z,D()({required:m,value:ae,onChange:function(Y){r.setValue(e,Y.target.value)},label:i,fullWidth:!0,disabled:u,inputProps:{readOnly:c},onFocus:function(){return r.clearErrorMsg(e)},onBlur:function(){return r.validate(e)},error:!!d,helperText:d||v,type:oe?"password":"text"},J))}),ht=l(10285),ft=l.n(ht),$t=l(47404),xt=["label","disabled","required","helperText","errorMsg","dataFormat","ampm"];V().extend(ft());var pt=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.label,u=t.disabled,c=t.required,v=t.helperText,d=t.errorMsg,g=t.dataFormat,m=g===void 0?"HH:mm:ss":g,x=t.ampm,p=x===void 0?!1:x,j=te()(t,xt);console.log("~~~ TimePicker",e);var S=(0,C.useState)(!1),y=Q()(S,2),f=y[0],h=y[1],$=r.getValue(e);(0,C.useEffect)(function(){r.linkage(e)},[$]);var Z=function(){r.validate(e)};return(0,s.jsx)(ce._,{dateAdapter:ve.y,children:(0,s.jsx)($t.j,D()({open:f,label:i,value:$?V()($,m):null,onChange:function(M){r.setValue(e,V()(M).format(m))},onClose:function(){Z(),h(!1)},onOpen:function(){h(!0)},disabled:u,slotProps:{textField:{required:c,size:"medium",error:!!d,helperText:d||v,fullWidth:!0,onBlur:function(){Z()},readOnly:!0,inputProps:{onClick:function(){u||h(!0)},style:{cursor:"pointer"}}}},ampm:p},j))})}),mt=l(19632),Me=l.n(mt),F=l(65972),fe=l(21987),Pe=l(69397),re=l(2734),B=l(60887),w=l(45587),gt=l(24285),yt=l(32610),bt=l(46907),jt=l(96540),Ee=l(82417),St=(0,T.observer)(function(a){var n=a.path,e=a.schema,o=e===void 0?{}:e,r=a.$$store;console.log("~~~ FormItem",n);var t=o.c,i=o.xs,u=o.justifyContent,c=u===void 0?"":u,v=o.alignItems,d=v===void 0?"":v,g=U[t].c;r.registerStatus(n,o);var m=r.context(n),x=m.visible;if((0,C.useEffect)(function(){return function(){console.log("========remove",n),r.destroyStatus(n)}},[n]),(0,C.useEffect)(function(){r.resetStatus(n,x)},[x]),!x)return"";var p={};return(c||d)&&(p={display:"flex",justifyContent:c,alignItems:d}),(0,s.jsx)(Ee.Z,{size:i||12,sx:p,children:(0,s.jsx)(g,{path:n,$$store:r})})}),W=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.schema,r=a.$$store;return console.log("~~~ FormEngine",e),(0,C.useEffect)(function(){return r.formLoaded(),function(){r.formDestroy()}},[]),(0,s.jsx)(Ee.Z,{container:!0,spacing:2,sx:{flexGrow:1},children:Object.keys(o).map(function(t){return(0,s.jsx)(St,{path:"".concat(e,".").concat(t),schema:o[t],$$store:r},t)})})}),Zt=["_key"],Ct=(0,T.observer)(function(a){var n,e=a.path,o=a.record,r=a.schema,t=a.onDelete,i=a.$$store,u=(0,re.Z)(),c=(u==null||(n=u.palette)===null||n===void 0?void 0:n.mode)==="dark",v=o._key,d=(0,w.nB)({id:v}),g=d.attributes,m=d.listeners,x=d.setNodeRef,p=d.isDragging,j=d.transform,S=d.transition,y=D()({transform:gt.ux.Transform.toString(j),transition:S},p?{position:"relative",zIndex:9999}:{});return(0,s.jsxs)(F.Z,{ref:x,style:y,direction:"row",justifyContent:"start",alignItems:"start",sx:{width:"100%"},spacing:1,children:[(0,s.jsx)(G.Z,D()(D()(D()({},g),m),{},{sx:{position:"relative",top:14,cursor:"move"},size:"small",children:(0,s.jsx)(yt.Z,{fontSize:"small"})})),(0,s.jsx)(W,{path:e,schema:r,$$store:i}),(0,s.jsx)(F.Z,{direction:"row",sx:{position:"relative",top:14},children:(0,s.jsx)(G.Z,{onClick:t,size:"small",children:(0,s.jsx)(bt.Z,{fontSize:"small"})})})]})}),Tt=(0,T.observer)(function(a){var n=a.path,e=a.$$store,o=e.context(n),r=o.variant,t=r===void 0?"default":r,i=o.elevation,u=i===void 0?1:i,c=o.label,v=o.addText,d=v===void 0?"":v,g=o.schema,m=e.getValue(n),x=(0,C.useRef)([]),p=[];x.current.length!==m.length?p=m.map(function(h,$){return D()(D()({},h),{},{_key:$+1})}):p=m.map(function(h,$){return D()(D()({},h),{},{_key:x.current[$]})});var j=(0,B.Dy)((0,B.VT)(B.we),(0,B.VT)(B.Lg,{coordinateGetter:w.is})),S=function($){x.current=$.map(function(b){return b._key});var Z=$.map(function(b){var M=b._key,E=te()(b,Zt);return E});e.setValue(n,Z),e.setTick()},y=!["outlined","elevation"].includes(t),f={};return t==="elevation"&&(f={elevation:u}),(0,s.jsxs)(fe.Z,D()(D()({sx:{p:y?0:2.5},variant:t},f),{},{children:[y?(0,s.jsx)(I.Z,{sx:{mb:2},children:c}):(0,s.jsx)(F.Z,{sx:{pt:0,pb:2.5},children:(0,s.jsx)(z.Z,{fontSize:18,children:c})}),(0,s.jsx)(B.LB,{sensors:j,collisionDetection:B.pE,onDragEnd:function($){var Z=$.active,b=$.over;if(Z.id!==b.id){var M=p.findIndex(function(k){return k._key===Z.id}),E=p.findIndex(function(k){return k._key===b.id}),A=(0,w.Rp)(p,M,E);S(A)}},children:(0,s.jsx)(w.Fo,{items:p.map(function(h){return h._key}),strategy:w.qw,children:(0,s.jsxs)(F.Z,{sx:{pt:2},spacing:1,children:[p.map(function(h,$){return(0,s.jsx)(Ct,{path:"".concat(n,"[").concat($,"]"),record:h,schema:g,onDelete:function(){var b=Me()(p);b.splice($,1),S(b)},$$store:e},h._key)}),(0,s.jsx)(Pe.Z,{onClick:function(){var $=Me()(p),Z=1;p.forEach(function(b){b._key>=Z&&(Z=b._key)}),Z+=1,$.push(D()({_key:Z},pe(g,{}))),S($)},variant:"outlined",sx:{borderStyle:"dashed"},startIcon:(0,s.jsx)(jt.Z,{}),disableRipple:!0,children:d||"ADD"})]})})})]}))}),Dt=(0,T.observer)(function(a){var n=a.path,e=a.$$store,o=e.context(n),r=o.variant,t=r===void 0?"default":r,i=o.elevation,u=i===void 0?1:i,c=o.label,v=o.schema;return t==="outlined"?(0,s.jsxs)(fe.Z,{sx:{p:2.5},variant:"outlined",children:[(0,s.jsx)(F.Z,{sx:{pt:0,pb:2.5},children:(0,s.jsx)(z.Z,{fontSize:18,children:c})}),(0,s.jsx)(W,{path:n,schema:v,$$store:e})]}):t==="elevation"?(0,s.jsxs)(fe.Z,{sx:{p:2.5},variant:"elevation",elevation:u,children:[(0,s.jsx)(F.Z,{sx:{pt:0,pb:2.5},children:(0,s.jsx)(z.Z,{fontSize:18,children:c})}),(0,s.jsx)(W,{path:n,schema:v,$$store:e})]}):(0,s.jsxs)(O.Z,{fullWidth:!0,children:[(0,s.jsx)(I.Z,{sx:{mb:2},children:c}),(0,s.jsx)(W,{path:n,schema:v,$$store:e})]})}),Mt=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.text,u=i===void 0?"":i,c=t.size,v=c===void 0?"medium":c,d=t.color,g=d===void 0?"primary":d,m=t.variant,x=m===void 0?"contained":m,p=t.disabled,j=p===void 0?!1:p,S=t.fullWidth,y=S===void 0?!0:S,f=t.width,h=t.onClick,$=h===void 0?function(){}:h;console.log("~~~ Enh LockButtom",e),(0,C.useEffect)(function(){r.linkage(e)},[]);var Z={};return f&&(Z.width=f),(0,s.jsx)(Pe.Z,{fullWidth:y,variant:x,size:v,color:g,disabled:j,onClick:function(){$(r.events(e))},sx:D()({textTransform:"none"},Z),children:u})}),Pt=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.title,u=t.secondary,c=u===void 0?"":u,v=t.align,d=v===void 0?"left":v;return console.log("~~~ Enh FormTitle",e),(0,C.useEffect)(function(){r.linkage(e)},[]),(0,s.jsxs)(F.Z,{spacing:.5,children:[(0,s.jsx)(z.Z,{fontSize:24,align:d,children:i}),(0,s.jsx)(z.Z,{fontSize:16,color:"textSecondary",align:d,children:c})]})}),Et=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.title,u=t.href,c=u===void 0?"":u;return console.log("~~~ Enh Link",e),(0,C.useEffect)(function(){r.linkage(e)},[]),(0,s.jsx)(de.Z,{align:"right",href:c,children:i})}),kt=function(n){for(var e=/(\[([^\]]+)\]\(([^)]+)\))/g,o=[],r=0,t;(t=e.exec(n))!==null;)r<t.index&&o.push(n.slice(r,t.index)),o.push([t[2],t[3]]),r=e.lastIndex;return r<n.length&&o.push(n.slice(r)),o},Ft=function(n,e){if(typeof n=="string"){var o=kt(n);return(0,s.jsx)(z.Z,D()(D()({},e),{},{children:o.map(function(r,t){return Array.isArray(r)?(0,s.jsx)(de.Z,{href:r[1],children:r[0]},t):r})}))}return n},Ot=Ft,Vt=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.$$store,r=o===void 0?null:o,t=r.context(e),i=t.text,u=i===void 0?"":i,c=t.fontSize,v=t.color,d={fontSize:c,color:v};return Object.keys(d).forEach(function(g){d[g]||delete d[g]}),console.log("~~~ Enh Typography",e),(0,C.useEffect)(function(){r.linkage(e)},[]),Ot(u,d)}),ke={},fr={},P=function(n,e,o){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"base";ke[n]={c:e,defaultValue:o,type:r}};P("TextField",vt,""),P("Select",ot,""),P("MultipleSelect",_e,[]),P("Radio",tt,""),P("Checked",We,!1),P("Checkbox",Re,[]),P("DatePicker",Xe,""),P("TimePicker",pt,""),P("DateTimePicker",Ke,""),P("Switch",lt,!1),P("Rating",nt,0),P("Slider",st,0),P("ArrayList",Tt,[],"array"),P("ObjectBlock",Dt,{},"object"),P("Enh.FormTitle",Pt,"","Enh"),P("Enh.Link",Et,"","Enh"),P("Enh.Typography",Vt,"","Enh"),P("Enh.FormButton",Mt,"","Enh");var U=ke,$e=function(n){var e={xs:12,default:U[n.c].defaultValue,label:"",helperText:"",visible:!0,disabled:!1};Object.keys(e).forEach(function(o){[null,void 0].includes(n[o])&&(n[o]=e[o])})},At=function(n){var e={visible:!0};Object.keys(e).forEach(function(o){[null,void 0].includes(n[o])&&(n[o]=e[o])})},It=function(n){n.default={},Object.keys(n.schema).forEach(function(e){n.default[e]=n.schema[e].default})},Lt=function a(n){return Object.keys(n).forEach(function(e){var o=n[e],r=U[o.c].type;r==="Enh"?At(o):r==="object"?($e(o),a(o.schema),It(o)):r==="array"?($e(o),a(o.schema)):$e(o)}),n};function xe(a){if(a===null||K()(a)!=="object")return a;if(a instanceof Date)return new Date(a);if(V().isDayjs(a))return V()(a);if(Array.isArray(a))return a.map(xe);var n={};return Object.keys(a).forEach(function(e){Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=xe(a[e]))}),n}var ne=function(a){var n=xe(a);return Lt(n),n},X=function(a,n,e){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){};try{for(var r=n.replace(/\[(\d+)\]/g,".[$1]").split("."),t=0;t<r.length-1;t+=1){var i=r[t];if(Array.isArray(a)&&/^\[(\d+)\]$/.test(i)){var u=parseInt(i.match(/^\[(\d+)\]$/)[1],10);a=a[u]}else a=a[i]}var c=r[r.length-1];if(Array.isArray(a)&&/^\[(\d+)\]$/.test(c)){var v=parseInt(c.match(/^\[(\d+)\]$/)[1],10);a[v]=e}else a[c]=e}catch(d){o(d)}},zt=function a(n,e,o){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";Object.keys(e).forEach(function(t){var i=r?"".concat(r,".").concat(t):t,u=U[e[t].c].type;if(u!=="Enh")if(u==="array"){var c=ie(o,i);Array.isArray(c)?(X(n,i,[]),c.forEach(function(d,g){X(n,"".concat(i,"[").concat(g,"]"),{}),a(n,e[t].schema,o,"".concat(i,"[").concat(g,"]"))})):X(n,i,[])}else if(u==="object")X(n,i,{}),a(n,e[t].schema,o,i);else{var v=ie(o,i);v===void 0&&(v=e[t].default),X(n,i,v)}})},pe=function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=ne(a),o={};return zt(o,e,n,""),o},Rt=l(12444),Bt=l.n(Rt),Wt=l(72004),Ht=l.n(Wt),Nt=l(9783),H=l.n(Nt),Fe=l(68949);function Yt(a){if(!a)return"";for(var n=a.split("."),e=null,o=n.length-1;o>=0;o--)if(/^\w+\[\d+\]$/.test(n[o])){e=n[o];break}if(!e)return a;var r=n.indexOf(e),t=n.slice(0,r+1),i=t.join(".");return i}function Gt(a,n){if(!a)return"";if(!n)return a;var e=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return a.replace(new RegExp("".concat(e,"."),""),"")}var Ut=function(a,n){return Yt(Gt(a,n))},Xt=function(){function a(n,e,o){Bt()(this,a),H()(this,"tick",!0),H()(this,"debugMode","data"),H()(this,"loaded",!1),H()(this,"componentStatus",{}),H()(this,"path",""),H()(this,"store",null),H()(this,"schema",{}),(0,Fe.makeAutoObservable)(this,{schema:Fe.observable.shallow}),this.path=n,this.store=e,this.schema=o}return Ht()(a,[{key:"setTick",value:function(){this.tick=!this.tick}},{key:"setDebugMode",value:function(e){this.debugMode=e}},{key:"registerStatus",value:function(e,o){if(!this.componentStatus[e]){var r=U[o.c].type,t=o.required;r==="Enh"?this.componentStatus[e]=D()({},o):this.componentStatus[e]=D()({errorMsg:"",_rule:null,_required:t?function(i){return[null,void 0,""].includes(i)||Array.isArray(i)&&i.length===0?"Required!":""}:null},o)}}},{key:"resetStatus",value:function(e,o){var r=U[this.componentStatus[e].c].type;r==="Enh"?this.componentStatus[e].visible=o:(this.componentStatus[e].errorMsg="",this.componentStatus[e].visible=o,this.getValue(e)!==this.componentStatus[e].default&&this.setValue(e,this.componentStatus[e].default))}},{key:"destroyStatus",value:function(e){delete this.componentStatus[e]}},{key:"formLoaded",value:function(){this.loaded=!0,this.changeAll()}},{key:"formDestroy",value:function(){this.loaded=!1}},{key:"linkage",value:function(e){this.loaded&&this.onChange(e)}},{key:"context",value:function(e){return this.componentStatus[e]}},{key:"setRule",value:function(e,o){this.componentStatus[e]._rule||(this.componentStatus[e]._rule=o)}},{key:"validate",value:function(e){var o=this.componentStatus[e].visible,r="";if(o){var t=this.getValue(e);typeof this.componentStatus[e]._rule=="function"&&(r=this.componentStatus[e]._rule(t)),!r&&typeof this.componentStatus[e]._required=="function"&&(r=this.componentStatus[e]._required(t)),!r&&typeof this.componentStatus[e].rule=="function"&&(r=this.componentStatus[e].rule(t,this.events(e)))}return this.componentStatus[e].errorMsg!==r&&(this.componentStatus[e].errorMsg=r),r}},{key:"clearErrorMsg",value:function(e){this.componentStatus[e].errorMsg&&(this.componentStatus[e].errorMsg="")}},{key:"validateForm",value:function(){var e=this,o=!0;return Object.keys(this.componentStatus).forEach(function(r){var t=e.validate(r);t&&(o=!1)}),o}},{key:"onChange",value:function(e){if(typeof this.componentStatus[e].onChange=="function"){var o=this.getValue(e);this.componentStatus[e].onChange(o,this.events(e))}}},{key:"changeAll",value:function(){var e=this;Object.keys(this.componentStatus).forEach(function(o){e.onChange(o)})}},{key:"events",value:function(){var e=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return{prefixPath:o?Ut(o,this.path):"",get:this.$get.bind(this),set:this.$set.bind(this),validate:this.validateForm.bind(this),reset:function(){e.setValue(e.path,pe(e.schema,{})),Object.keys(e.componentStatus).forEach(function(t){e.componentStatus[t].errorMsg&&(e.componentStatus[t].errorMsg="")}),e.changeAll()},getFormValues:function(){return JSON.parse(JSON.stringify(e.getValue(e.path)))}}}},{key:"$get",value:function(e,o){var r="".concat(this.path,".").concat(e);return o==="value"?this.getValue(r):this.componentStatus[r][o]}},{key:"$set",value:function(e,o,r){var t="".concat(this.path,".").concat(e);o==="value"?this.setValue(t,r):this.componentStatus[t][o]=r}},{key:"$getValue",value:function(e){var o="".concat(this.path,".").concat(e);return this.store.$$get(o)}},{key:"setValue",value:function(e,o){this.store.$$set(e,o),this.setTick()}},{key:"getValue",value:function(e){return this.store.$$get(e)}}]),a}(),Oe=Xt,me=l(75316),Jt=l(45670),Qt=l(66568),ge=l(76346),Kt=l(34206),wt=l(68971),qt=l(11355),ye=l(12576),be=l(20286),_t=(0,T.observer)(function(a){var n,e=a.store,o=a.path,r=a.$$store,t=(0,re.Z)(),i=(t==null||(n=t.palette)===null||n===void 0?void 0:n.mode)==="dark",u=r.tick,c=i?{vscodeTheme:be.r}:{};return(0,s.jsx)(ye.ZP,{value:e.$$get(o)||{},style:c,displayObjectSize:!1,displayDataTypes:!1,enableClipboard:!1})}),er=(0,T.observer)(function(a){var n,e=a.$$store,o=(0,re.Z)(),r=(o==null||(n=o.palette)===null||n===void 0?void 0:n.mode)==="dark",t=e.tick,i=r?{vscodeTheme:be.r}:{};return(0,s.jsx)(ye.ZP,{value:e.schema,style:i,displayObjectSize:!1,displayDataTypes:!1,enableClipboard:!1})}),tr=(0,T.observer)(function(a){var n,e=a.$$store,o=(0,re.Z)(),r=(o==null||(n=o.palette)===null||n===void 0?void 0:n.mode)==="dark",t=e.tick,i=r?{vscodeTheme:be.r}:{};return(0,s.jsx)(ye.ZP,{value:e.componentStatus,style:i,displayObjectSize:!1,displayDataTypes:!1,enableClipboard:!1})}),Ve=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.store,r=o===void 0?null:o,t=a.$$store,i=t===void 0?null:t,u=a.width,c=u===void 0?400:u,v=a.height,d=v===void 0?"100vh":v;return(0,s.jsx)(R.Z,{sx:{width:c,height:d,display:"flex",flexDirection:"column",borderLeft:1,borderColor:"divider"},children:(0,s.jsxs)(Jt.ZP,{value:i.debugMode,children:[(0,s.jsx)(R.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,s.jsxs)(Qt.Z,{sx:{minHeight:0,"& .MuiTab-root":{p:1.5,minHeight:0,minWidth:0,fontSize:12}},onChange:function(m,x){return i.setDebugMode(x)},children:[(0,s.jsx)(me.Z,{icon:(0,s.jsx)(Kt.Z,{sx:{fontSize:15}}),iconPosition:"start",label:i.debugMode==="data"?"data":"",value:"data"}),(0,s.jsx)(me.Z,{icon:(0,s.jsx)(wt.Z,{sx:{fontSize:15}}),iconPosition:"start",label:i.debugMode==="schema"?"schema":"",value:"schema"}),(0,s.jsx)(me.Z,{icon:(0,s.jsx)(qt.Z,{sx:{fontSize:15}}),iconPosition:"start",label:i.debugMode==="status"?"status":"",value:"status"})]})}),(0,s.jsx)(ge.Z,{value:"data",sx:{p:2,flex:1,overflow:"auto"},children:(0,s.jsx)(_t,{$$store:i,store:r,path:e})}),(0,s.jsx)(ge.Z,{value:"schema",sx:{p:2,flex:1,overflow:"auto"},children:(0,s.jsx)(er,{$$store:i})}),(0,s.jsx)(ge.Z,{value:"status",sx:{p:2,flex:1,overflow:"auto"},children:(0,s.jsx)(tr,{$$store:i})})]})})}),rr=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.store,r=o===void 0?null:o,t=a.schema,i=a.debug,u=i===void 0?!1:i;console.log("~~~ XBaseForm");var c=(0,C.useMemo)(function(){return ne(t)},[t]),v=(0,C.useMemo)(function(){return new Oe(e,r,t)},[e,r,t]);return u?(0,s.jsxs)(R.Z,{sx:{position:"relative",width:"100%"},children:[(0,s.jsx)(R.Z,{sx:{width:"60%",minHeight:400,p:4,boxSizing:"border-box"},children:(0,s.jsx)(W,{path:e,store:r,schema:c,$$store:v})}),(0,s.jsx)(R.Z,{sx:{position:"absolute",top:0,right:0,bottom:0,width:"40%"},children:(0,s.jsx)(Ve,{store:r,$$store:v,path:e,width:"100%",height:"100%"})})]}):(0,s.jsx)(W,{path:e,store:r,schema:c,$$store:v})}),nr=l(19058),or=l(83808),ar=l(21023),sr=l(66818),ir=l(57976),lr=(0,T.observer)(function(a){var n=a.path,e=n===void 0?"":n,o=a.store,r=o===void 0?null:o,t=a.schema,i=a.width,u=i===void 0?600:i,c=a.open,v=c===void 0?!1:c,d=a.anchor,g=d===void 0?"left":d,m=a.title,x=m===void 0?"":m,p=a.debug,j=p===void 0?!1:p,S=a.onClose,y=S===void 0?function(){}:S,f=a.onSave,h=f===void 0?function(){}:f,$=(0,C.useMemo)(function(){return ne(t)},[t]),Z=(0,C.useMemo)(function(){return new Oe(e,r,t)},[]);return(0,s.jsx)(nr.ZP,{open:v,onClose:y,anchor:g,children:(0,s.jsxs)(F.Z,{direction:"row",alignItems:"start",children:[(0,s.jsxs)(F.Z,{sx:{width:u,display:"flex",height:"100vh",flexDirection:"column",borderLeft:1,borderColor:"divider"},children:[(0,s.jsxs)(or.Z,{sx:{position:"sticky",top:0,zIndex:10,borderBottom:1,borderColor:"divider"},children:[(0,s.jsx)(G.Z,{sx:{mr:2},onClick:function(){y()},children:(0,s.jsx)(ar.Z,{})}),(0,s.jsx)(z.Z,{component:"div",sx:{flexGrow:1},children:x}),(0,s.jsxs)(F.Z,{direction:"row",children:[(0,s.jsx)(G.Z,{onClick:function(){Z.validateForm()&&h()},children:(0,s.jsx)(sr.Z,{})}),(0,s.jsx)(G.Z,{disabled:!0,children:(0,s.jsx)(ir.Z,{})})]})]}),(0,s.jsx)(R.Z,{sx:{p:4,flex:1,overflow:"auto"},children:(0,s.jsx)(W,{path:e,store:r,schema:$,$$store:Z})})]}),!!j&&(0,s.jsx)(Ve,{store:r,$$store:Z,path:e})]})})}),ur=ie,dr=X,cr=pe,vr=ne}}]);
